<!DOCTYPE html>
<html lang="ko">
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Sign-In -->
  <meta name="google-signin-client_id" content="16973939404-jdmjuc52r35jtm7u50121qtp46sim2a0.apps.googleusercontent.com">

  <!-- SEO & Description - AdSense ìŠ¹ì¸ì„ ìœ„í•œ ê³ í’ˆì§ˆ ë©”íƒ€ ì •ë³´ -->
  <meta name="description" content="ì‚¬ì£¼ì™€ MBTIë¥¼ ê²°í•©í•œ ìƒˆë¡œìš´ ìš´ì„¸ ì„œë¹„ìŠ¤. ë‚˜ì˜ 2026ë…„ ìš´ì„¸ë¥¼ ë¬´ë£Œë¡œ í™•ì¸í•˜ì„¸ìš”! íšŒì›ê°€ì… ì—†ì´ 1ë¶„ë§Œì— ê²°ê³¼ í™•ì¸. ì‚¬ì£¼íŒ”ì, í† ì •ë¹„ê²°, ì‹ ë…„ìš´ì„¸ë¥¼ AIê°€ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤.">
  <meta name="keywords" content="ìš´ì„¸, ì‚¬ì£¼, MBTI, 2026ìš´ì„¸, ì‹ ë…„ìš´ì„¸, ë¬´ë£Œìš´ì„¸, ì‚¬ì£¼íŒ”ì, í† ì •ë¹„ê²°, AIìš´ì„¸, ì‚¬ì£¼ë¶„ì„, ë³‘ì˜¤ë…„ìš´ì„¸">
  <meta name="author" content="2026 ì‹ ë…„ìš´ì„¸ (MBTI ìš´ì„¸)">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://mbtiunse.com">

  <!-- Open Graph (Facebook, KakaoTalk) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="2026 ì‹ ë…„ìš´ì„¸ (MBTI ìš´ì„¸) - ë‚˜ì˜ 2026ë…„ ìš´ì„¸ëŠ”? ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸°">
  <meta property="og:description" content="ì‚¬ì£¼ Ã— MBTI í•˜ì´ë¸Œë¦¬ë“œ ìš´ì„¸ ğŸ”® íšŒì›ê°€ì… ì—†ì´ ì™„ì „ ë¬´ë£Œ! 1ë¶„ë§Œì— ë‚˜ë§Œì˜ ìš´ì„¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.">
  <meta property="og:image" content="https://mbtiunse.com/og-image.png?v=20260102">
  <meta property="og:image:secure_url" content="https://mbtiunse.com/og-image.png?v=20260102">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://mbtiunse.com">
  <meta property="og:site_name" content="2026 ì‹ ë…„ìš´ì„¸ (MBTI ìš´ì„¸)">
  <meta property="og:locale" content="ko_KR">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="2026 ì‹ ë…„ìš´ì„¸ (MBTI ìš´ì„¸) - ë‚˜ì˜ 2026ë…„ ìš´ì„¸ëŠ”? ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸°">
  <meta name="twitter:description" content="ì‚¬ì£¼ Ã— MBTI í•˜ì´ë¸Œë¦¬ë“œ ìš´ì„¸ ğŸ”® íšŒì›ê°€ì… ì—†ì´ ì™„ì „ ë¬´ë£Œ!">
  <meta name="twitter:image" content="https://mbtiunse.com/og-image.png?v=20260102">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="2026 ì‹ ë…„ìš´ì„¸">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>2026 ì‹ ë…„ìš´ì„¸ (MBTI ìš´ì„¸) - ì‚¬ì£¼ Ã— MBTI ìš´ì„¸ | ë¬´ë£Œë¡œ ë‚˜ì˜ 2026ë…„ ìš´ì„¸ í™•ì¸</title>
  <link rel="manifest" href="manifest.json">

  <!-- Google AdSense ìë™ ê´‘ê³  ì½”ë“œ -->
  <!--
    AdSense ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤:
    1. ìë™ ê´‘ê³ ëŠ” ì½˜í…ì¸ ì™€ ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ìµœì  ìœ„ì¹˜ì— ë°°ì¹˜ë¨
    2. ë°˜ì‘í˜• ê´‘ê³ ë¡œ ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± ìë™ ëŒ€ì‘
    3. ê¸°ì¡´ ì½˜í…ì¸  ë ˆì´ì•„ì›ƒì„ í•´ì¹˜ì§€ ì•ŠìŒ
    4. ê´‘ê³ ê°€ í‘œì‹œë˜ê¸°ê¹Œì§€ ìµœëŒ€ 1ì‹œê°„ ì†Œìš” ê°€ëŠ¥
  -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9883980748568710"
     crossorigin="anonymous"></script>

  <!-- ì¸ì•± ë¸Œë¼ìš°ì € (ì¹´ì¹´ì˜¤í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨, í˜ì´ìŠ¤ë¶ ë“±) â†’ ê¸°ë³¸ ë¸Œë¼ìš°ì € ë¦¬ë‹¤ì´ë ‰íŠ¸ -->
  <script>
    (function() {
      'use strict';

      // ============================================================================
      // ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ í•¨ìˆ˜ë“¤
      // ============================================================================

      // ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€
      function isKakaoInAppBrowser() {
        return /KAKAOTALK/i.test(navigator.userAgent);
      }

      // ì¸ìŠ¤íƒ€ê·¸ë¨ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€
      function isInstagramInAppBrowser() {
        return /Instagram/i.test(navigator.userAgent);
      }

      // í˜ì´ìŠ¤ë¶ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€
      function isFacebookInAppBrowser() {
        return /FBAN|FBAV|FB_IAB/i.test(navigator.userAgent);
      }

      // ë„¤ì´ë²„ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€
      function isNaverInAppBrowser() {
        return /NAVER/i.test(navigator.userAgent);
      }

      // ëª¨ë“  ì¸ì•± ë¸Œë¼ìš°ì € í†µí•© ê°ì§€
      function isInAppBrowser() {
        return isKakaoInAppBrowser() || isInstagramInAppBrowser() ||
               isFacebookInAppBrowser() || isNaverInAppBrowser();
      }

      // ì¸ì•± ë¸Œë¼ìš°ì € ì¢…ë¥˜ ë°˜í™˜
      function getInAppBrowserType() {
        if (isInstagramInAppBrowser()) return 'instagram';
        if (isFacebookInAppBrowser()) return 'facebook';
        if (isKakaoInAppBrowser()) return 'kakao';
        if (isNaverInAppBrowser()) return 'naver';
        return null;
      }

      // iOS ê°ì§€
      function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent);
      }

      // Android ê°ì§€
      function isAndroid() {
        return /Android/i.test(navigator.userAgent);
      }

      // ë¦¬ë‹¤ì´ë ‰íŠ¸ ìƒíƒœ í™•ì¸ (ë¬´í•œ ë£¨í”„ ë°©ì§€)
      function hasRedirected() {
        return sessionStorage.getItem('inapp_redirected') === 'true';
      }

      // ë¦¬ë‹¤ì´ë ‰íŠ¸ ìƒíƒœ ì €ì¥
      function markAsRedirected() {
        sessionStorage.setItem('inapp_redirected', 'true');
      }

      // ============================================================================
      // Android: Chromeìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      // ============================================================================
      function redirectToChrome(browserType) {
        console.log('ğŸ”„ ' + browserType + ' ì¸ì•± â†’ Chrome ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì‘');

        try {
          const currentUrl = window.location.href;
          const intentUrl =
            'intent://' +
            currentUrl.replace(/https?:\/\//i, '') +
            '#Intent;' +
            'scheme=https;' +
            'package=com.android.chrome;' +
            'S.browser_fallback_url=' + encodeURIComponent(currentUrl) +
            ';end';

          markAsRedirected();
          window.location.replace(intentUrl);
        } catch (error) {
          console.error('âŒ Chrome ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤íŒ¨:', error);
          showAndroidFallbackMessage(browserType);
        }
      }

      // ============================================================================
      // Android: ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤íŒ¨ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€
      // ============================================================================
      function showAndroidFallbackMessage(browserType) {
        const message = document.createElement('div');
        message.id = 'inapp-android-message';
        message.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.9);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 99999;
          animation: fadeIn 0.3s ease;
        `;

        const browserName = {
          'instagram': 'ì¸ìŠ¤íƒ€ê·¸ë¨',
          'facebook': 'í˜ì´ìŠ¤ë¶',
          'kakao': 'ì¹´ì¹´ì˜¤í†¡',
          'naver': 'ë„¤ì´ë²„'
        }[browserType] || 'ì•±';

        message.innerHTML = `
          <style>
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
          </style>
          <div style="
            background: white;
            padding: 32px 24px;
            border-radius: 20px;
            margin: 20px;
            text-align: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 320px;
          ">
            <div style="font-size: 56px; margin-bottom: 16px;">ğŸŒ</div>
            <h3 style="margin: 0 0 12px 0; font-size: 20px; color: #1a1a1a; font-weight: 700;">
              ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ì£¼ì„¸ìš”
            </h3>
            <p style="margin: 0 0 24px 0; color: #666; font-size: 14px; line-height: 1.6;">
              ${browserName} ë‚´ì¥ ë¸Œë¼ìš°ì €ì—ì„œëŠ”<br>
              ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë©ë‹ˆë‹¤.<br><br>
              <strong style="color: #333;">ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´(â‹®)</strong>ì—ì„œ<br>
              <strong style="color: #4285f4;">'Chromeìœ¼ë¡œ ì—´ê¸°'</strong>ë¥¼ ì„ íƒí•˜ì„¸ìš”
            </p>
            <button onclick="document.getElementById('inapp-android-message').remove(); sessionStorage.setItem('inapp_redirected', 'true');" style="
              width: 100%;
              padding: 14px;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              color: white;
              border: none;
              border-radius: 12px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
            ">
              ì´ëŒ€ë¡œ ê³„ì†í•˜ê¸°
            </button>
          </div>
        `;
        document.body.appendChild(message);
      }

      // ============================================================================
      // iOS: Safariì—ì„œ ì—´ê¸° ì•ˆë‚´
      // ============================================================================
      function showIOSGuide(browserType) {
        console.log('ğŸ“± iOS ' + browserType + ' ì¸ì•±: Safari ì•ˆë‚´ í‘œì‹œ');

        const guide = document.createElement('div');
        guide.id = 'inapp-ios-guide';
        guide.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.85);
          display: flex;
          align-items: flex-end;
          z-index: 99999;
          animation: fadeIn 0.3s ease;
        `;

        const browserName = {
          'instagram': 'ì¸ìŠ¤íƒ€ê·¸ë¨',
          'facebook': 'í˜ì´ìŠ¤ë¶',
          'kakao': 'ì¹´ì¹´ì˜¤í†¡',
          'naver': 'ë„¤ì´ë²„'
        }[browserType] || 'ì•±';

        // ì¸ìŠ¤íƒ€ê·¸ë¨/í˜ì´ìŠ¤ë¶ì€ ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´ ì•ˆë‚´
        const isMetaApp = browserType === 'instagram' || browserType === 'facebook';

        guide.innerHTML = `
          <style>
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideUp {
              from { transform: translateY(100%); }
              to { transform: translateY(0); }
            }
            #inapp-ios-content {
              animation: slideUp 0.3s ease;
            }
          </style>
          <div id="inapp-ios-content" style="
            width: 100%;
            background: white;
            padding: 24px;
            border-radius: 16px 16px 0 0;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
          ">
            <div style="text-align: center; margin-bottom: 20px;">
              <div style="font-size: 48px; margin-bottom: 12px;">ğŸŒŸ</div>
              <h3 style="margin: 0 0 8px 0; font-size: 20px; color: #1a1a1a; font-weight: 700;">
                Safariì—ì„œ ì—´ì–´ì£¼ì„¸ìš”
              </h3>
              <p style="margin: 0; color: #666; font-size: 14px; line-height: 1.5;">
                ${browserName} ë‚´ì¥ ë¸Œë¼ìš°ì €ì—ì„œëŠ”<br>ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë©ë‹ˆë‹¤
              </p>
            </div>

            <div style="background: #f8f9fa; padding: 16px; border-radius: 12px; margin-bottom: 20px;">
              <p style="margin: 0 0 12px 0; color: #495057; font-size: 14px; font-weight: 600;">
                ğŸ“Œ Safariì—ì„œ ì—´ê¸°
              </p>
              <ol style="margin: 0; padding-left: 20px; color: #6c757d; font-size: 14px; line-height: 1.8;">
                ${isMetaApp ? `
                <li>ìš°ì¸¡ ìƒë‹¨ì˜ <strong style="color: #495057;">ë©”ë‰´(â‹¯)</strong> íƒ­</li>
                <li><strong style="color: #495057;">'Safariì—ì„œ ì—´ê¸°'</strong> ë˜ëŠ”<br><strong style="color: #495057;">'ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°'</strong> ì„ íƒ</li>
                ` : `
                <li>í™”ë©´ í•˜ë‹¨ì˜ <strong style="color: #495057;">ê³µìœ  ë²„íŠ¼</strong> (ğŸ“¤) íƒ­</li>
                <li><strong style="color: #495057;">'Safariì—ì„œ ì—´ê¸°'</strong> ì„ íƒ</li>
                `}
              </ol>
            </div>

            <button onclick="document.getElementById('inapp-ios-guide').remove(); sessionStorage.setItem('inapp_redirected', 'true');" style="
              width: 100%;
              padding: 16px;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              color: white;
              border: none;
              border-radius: 12px;
              font-size: 16px;
              font-weight: 700;
              cursor: pointer;
              box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
              transition: transform 0.2s ease;
            " onmouseover="this.style.transform='scale(0.98)'" onmouseout="this.style.transform='scale(1)'">
              ì´ëŒ€ë¡œ ê³„ì†í•˜ê¸°
            </button>
          </div>
        `;

        document.body.appendChild(guide);
      }

      // ============================================================================
      // ë©”ì¸ ì‹¤í–‰ ë¡œì§
      // ============================================================================
      function handleInAppBrowserRedirect() {
        const browserType = getInAppBrowserType();

        // ì¸ì•± ë¸Œë¼ìš°ì €ê°€ ì•„ë‹ˆë©´ ì‹¤í–‰ ì¤‘ë‹¨
        if (!browserType) {
          console.log('âœ… ì¸ì•± ë¸Œë¼ìš°ì € ì•„ë‹˜ - ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¶ˆí•„ìš”');
          return;
        }

        // ì´ë¯¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œë„í–ˆìœ¼ë©´ ì¤‘ë‹¨ (ë¬´í•œ ë£¨í”„ ë°©ì§€)
        if (hasRedirected()) {
          console.log('â­ï¸ ì´ë¯¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œë„ë¨ - ìŠ¤í‚µ');
          return;
        }

        console.log('ğŸ” ' + browserType + ' ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ë¨');
        console.log('ğŸ“± User Agent:', navigator.userAgent);

        // Android: Intent URIë¡œ Chrome ë¦¬ë‹¤ì´ë ‰íŠ¸
        if (isAndroid()) {
          redirectToChrome(browserType);
        }
        // iOS: ì‚¬ìš©ì ì•ˆë‚´ í‘œì‹œ
        else if (isIOS()) {
          showIOSGuide(browserType);
        }
      }

      // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ì‹¤í–‰
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', handleInAppBrowserRedirect);
      } else {
        handleInAppBrowserRedirect();
      }
    })();
  </script>

  <!-- PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ & í‘¸ì‹œ ì•Œë¦¼ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ ì €ì¥
    var deferredInstallPrompt = null;
    var isPwaInstalled = false;

    // beforeinstallprompt ì´ë²¤íŠ¸ ìº¡ì²˜
    window.addEventListener('beforeinstallprompt', function(e) {
      console.log('âœ… beforeinstallprompt event fired');
      // ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ë°©ì§€
      e.preventDefault();
      // í”„ë¡¬í”„íŠ¸ ì €ì¥
      deferredInstallPrompt = e;
      // Flutterì— ì•Œë¦¼
      window.dispatchEvent(new CustomEvent('pwaInstallAvailable'));
    });

    // ì•± ì„¤ì¹˜ ì™„ë£Œ ì´ë²¤íŠ¸
    window.addEventListener('appinstalled', function() {
      console.log('âœ… PWA was installed');
      isPwaInstalled = true;
      deferredInstallPrompt = null;
    });

    // Flutterì—ì„œ í˜¸ì¶œí•˜ëŠ” ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ íŠ¸ë¦¬ê±° í•¨ìˆ˜
    async function triggerInstallPrompt() {
      if (!deferredInstallPrompt) {
        console.log('âš ï¸ No install prompt available');
        return null;
      }

      try {
        // í”„ë¡¬í”„íŠ¸ í‘œì‹œ
        deferredInstallPrompt.prompt();
        // ì‚¬ìš©ì ì‘ë‹µ ëŒ€ê¸°
        const result = await deferredInstallPrompt.userChoice;
        console.log('ğŸ“± User choice:', result.outcome);
        
        // í”„ë¡¬í”„íŠ¸ëŠ” í•œ ë²ˆë§Œ ì‚¬ìš© ê°€ëŠ¥
        if (result.outcome === 'accepted') {
          deferredInstallPrompt = null;
        }
        
        return result;
      } catch (error) {
        console.error('âŒ Install prompt error:', error);
        return null;
      }
    }

    // ì›¹ í‘¸ì‹œ ì•Œë¦¼ ê¶Œí•œ ìš”ì²­ í•¨ìˆ˜
    async function requestNotificationPermission() {
      if (!('Notification' in window)) {
        console.log('âš ï¸ This browser does not support notifications');
        return 'unsupported';
      }

      if (Notification.permission === 'granted') {
        console.log('âœ… Notification permission already granted');
        return 'granted';
      }

      if (Notification.permission === 'denied') {
        console.log('âŒ Notification permission was denied');
        return 'denied';
      }

      try {
        const permission = await Notification.requestPermission();
        console.log('ğŸ“± Notification permission:', permission);
        return permission;
      } catch (error) {
        console.error('âŒ Notification permission error:', error);
        return 'error';
      }
    }

    // ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ í‘¸ì‹œ ì•Œë¦¼ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸
    function isPushSupported() {
      return 'serviceWorker' in navigator && 'PushManager' in window;
    }

    // Standalone ëª¨ë“œ í™•ì¸ (ì´ë¯¸ ì„¤ì¹˜ëœ ì•±)
    function isRunningStandalone() {
      return window.matchMedia('(display-mode: standalone)').matches ||
             window.matchMedia('(display-mode: fullscreen)').matches ||
             window.navigator.standalone === true;
    }

    // ì´ˆê¸°í™” ì‹œ standalone ëª¨ë“œ í™•ì¸
    if (isRunningStandalone()) {
      isPwaInstalled = true;
      console.log('âœ… Running in standalone mode (PWA installed)');
    }
  </script>

  <!-- ============================================================================ -->
  <!-- Apps in Toss SDK Mock (ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©)                                          -->
  <!-- ============================================================================ -->
  <!--
    ì‹¤ì œ ë°°í¬ ì‹œì—ëŠ” Tossì—ì„œ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” SDKë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    ë¡œì»¬ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Mock êµ¬í˜„ì…ë‹ˆë‹¤.

    ì‹¤ì œ Apps in Toss SDK API:
    - AppsInToss.init(): SDK ì´ˆê¸°í™”
    - AppsInToss.requestPayment(): ê²°ì œ ìš”ì²­
    - AppsInToss.getUser(): ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
    - AppsInToss.showToast(): í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
  -->
  <script>
    (function() {
      'use strict';

      // Apps in Toss í™˜ê²½ ê°ì§€
      const isAppsInToss = window.location.hostname.includes('apps-in-toss') ||
                          window.location.search.includes('toss-env=apps');

      console.log('ğŸª Apps in Toss í™˜ê²½:', isAppsInToss ? 'YES' : 'NO (Mock ì‚¬ìš©)');

      // Mock SDK êµ¬í˜„
      window.AppsInToss = {
        // SDK ì´ˆê¸°í™”
        init: function() {
          return new Promise((resolve) => {
            console.log('ğŸ”§ Apps in Toss SDK initialized (Mock)');
            resolve({
              success: true,
              version: '1.0.0-mock',
              environment: isAppsInToss ? 'production' : 'development'
            });
          });
        },

        // ê²°ì œ ìš”ì²­
        requestPayment: function(options) {
          return new Promise((resolve, reject) => {
            console.log('ğŸ’³ ê²°ì œ ìš”ì²­ (Mock):', options);

            // í•„ìˆ˜ íŒŒë¼ë¯¸í„° ê²€ì¦
            if (!options.orderId || !options.orderName || !options.amount) {
              reject({
                code: 'INVALID_PARAMETER',
                message: 'í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.'
              });
              return;
            }

            // Mock ê²°ì œ ìŠ¹ì¸ ì‹œë®¬ë ˆì´ì…˜ (2ì´ˆ í›„)
            setTimeout(() => {
              // 90% í™•ë¥ ë¡œ ì„±ê³µ, 10% í™•ë¥ ë¡œ ì‹¤íŒ¨ (í…ŒìŠ¤íŠ¸ìš©)
              const isSuccess = Math.random() > 0.1;

              if (isSuccess) {
                resolve({
                  success: true,
                  orderId: options.orderId,
                  orderName: options.orderName,
                  amount: options.amount,
                  paymentKey: 'mock_payment_key_' + Date.now(),
                  approvedAt: new Date().toISOString(),
                  method: 'TOSS_MONEY',
                  customerName: 'í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì',
                  customerPhone: '010-1234-5678'
                });
              } else {
                reject({
                  code: 'PAYMENT_FAILED',
                  message: 'ê²°ì œê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. (Mock í…ŒìŠ¤íŠ¸)'
                });
              }
            }, 2000);
          });
        },

        // ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
        getUser: function() {
          return new Promise((resolve) => {
            console.log('ğŸ‘¤ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (Mock)');

            if (isAppsInToss) {
              // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” Tossê°€ ì£¼ì…í•œ ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
              resolve({
                userId: 'toss_user_' + Math.floor(Math.random() * 100000),
                name: 'í† ìŠ¤ ì‚¬ìš©ì',
                phone: '010-****-****',
                verified: true
              });
            } else {
              // Mock í™˜ê²½ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì
              resolve({
                userId: 'mock_user_123',
                name: 'í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì',
                phone: '010-1234-5678',
                verified: true
              });
            }
          });
        },

        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        showToast: function(message) {
          console.log('ğŸ”” Toast:', message);

          // ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” ê°„ë‹¨í•œ alert ëŒ€ì‹  custom toast
          const toast = document.createElement('div');
          toast.style.cssText = `
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 999999;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            animation: fadeInOut 3s ease-in-out;
          `;
          toast.textContent = message;

          // ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
          const style = document.createElement('style');
          style.textContent = `
            @keyframes fadeInOut {
              0% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
              10% { opacity: 1; transform: translateX(-50%) translateY(0); }
              90% { opacity: 1; transform: translateX(-50%) translateY(0); }
              100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
            }
          `;
          document.head.appendChild(style);
          document.body.appendChild(toast);

          // 3ì´ˆ í›„ ì œê±°
          setTimeout(() => {
            toast.remove();
            style.remove();
          }, 3000);
        },

        // ì•± ë‹«ê¸°
        close: function() {
          console.log('ğŸšª ì•± ë‹«ê¸° (Mock)');

          if (isAppsInToss) {
            // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” Toss ì•±ìœ¼ë¡œ ë³µê·€
            window.history.back();
          } else {
            // Mock í™˜ê²½ì—ì„œëŠ” í™ˆìœ¼ë¡œ ì´ë™
            window.location.href = '/';
          }
        },

        // í™˜ê²½ ì •ë³´
        getEnvironment: function() {
          return {
            isAppsInToss: isAppsInToss,
            platform: 'web',
            userAgent: navigator.userAgent,
            isMock: !isAppsInToss
          };
        }
      };

      // ìë™ ì´ˆê¸°í™”
      window.AppsInToss.init().then((result) => {
        console.log('âœ… Apps in Toss SDK ready:', result);

        // Flutterì— SDK ì¤€ë¹„ ì™„ë£Œ ì´ë²¤íŠ¸ ë°œì†¡
        window.dispatchEvent(new CustomEvent('appsInTossReady', {
          detail: result
        }));
      });

    })();
  </script>
</head>
<body>
  <style>
    /* Flutter ì²« í”„ë ˆì„ ì „ ë¡œë”© í™”ë©´ - ì§„í–‰ë¥  + ë‹¨ê³„ë³„ ë©”ì‹œì§€ */
    #boot-loader {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #0B0F1A 0%, #1a1f2e 100%);
      color: #FFFFFF;
      font-family: -apple-system, BlinkMacSystemFont, 'Pretendard', 'Segoe UI', sans-serif;
      z-index: 99999;
    }
    #boot-loader .inner {
      text-align: center;
      padding: 32px 24px;
      max-width: 280px;
    }
    #boot-loader .logo {
      font-size: 48px;
      margin-bottom: 20px;
      animation: pulse 2s ease-in-out infinite;
    }
    #boot-loader .title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: -0.3px;
      margin-bottom: 8px;
    }
    #boot-loader .sub {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.7);
      line-height: 1.5;
      margin-bottom: 24px;
      min-height: 40px;
    }
    /* ì§„í–‰ë¥  ë°” */
    #boot-loader .progress-container {
      width: 100%;
      height: 4px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 12px;
    }
    #boot-loader .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #9B7BFF 0%, #7B5BDF 100%);
      border-radius: 2px;
      width: 0%;
      transition: width 0.3s ease-out;
    }
    #boot-loader .progress-text {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.5);
      font-variant-numeric: tabular-nums;
    }
    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.9; }
    }
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    #boot-loader .progress-bar.loading {
      background: linear-gradient(90deg, #9B7BFF, #7B5BDF, #9B7BFF);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
  </style>

  <div id="boot-loader" role="status" aria-live="polite">
    <div class="inner">
      <div class="logo" aria-hidden="true">ğŸ”®</div>
      <div class="title">2026 ì‹ ë…„ìš´ì„¸</div>
      <div class="sub" id="loader-message">ì—°ê²° ì¤‘...</div>
      <div class="progress-container">
        <div class="progress-bar loading" id="progress-bar"></div>
      </div>
      <div class="progress-text" id="progress-text">0%</div>
    </div>
  </div>

  <script>
    (function () {
      var stages = [
        { time: 0,    progress: 5,   message: 'ì—°ê²° ì¤‘...' },
        { time: 500,  progress: 15,  message: 'ì„œë²„ ì—°ê²° ì™„ë£Œ' },
        { time: 1500, progress: 30,  message: 'ì•± ë¦¬ì†ŒìŠ¤ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...' },
        { time: 3000, progress: 50,  message: 'í™”ë©´ ì¤€ë¹„ ì¤‘...' },
        { time: 5000, progress: 70,  message: 'ê±°ì˜ ì™„ë£Œ!' },
        { time: 8000, progress: 85,  message: 'ì²˜ë¦¬ê°€ ì§€ì—°ë˜ê³  ìˆì–´ìš”...' },
        { time: 12000, progress: 90, message: 'ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”' },
        { time: 20000, progress: 95, message: 'ìƒˆë¡œê³ ì¹¨ì„ ì‹œë„í•´ë³´ì„¸ìš”' }
      ];

      var progressBar = document.getElementById('progress-bar');
      var progressText = document.getElementById('progress-text');
      var loaderMessage = document.getElementById('loader-message');
      var loadStartTime = Date.now();
      var currentProgress = 0;

      function updateProgress(progress, message) {
        if (progress > currentProgress) {
          currentProgress = progress;
          if (progressBar) progressBar.style.width = progress + '%';
          if (progressText) progressText.textContent = progress + '%';
        }
        if (message && loaderMessage) loaderMessage.textContent = message;
      }

      // ë‹¨ê³„ë³„ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
      stages.forEach(function(stage) {
        setTimeout(function() {
          var el = document.getElementById('boot-loader');
          if (el) updateProgress(stage.progress, stage.message);
        }, stage.time);
      });

      function removeLoader() {
        var el = document.getElementById('boot-loader');
        if (el) {
          // ì™„ë£Œ ì• ë‹ˆë©”ì´ì…˜
          updateProgress(100, 'ì™„ë£Œ!');
          setTimeout(function() {
            el.style.transition = 'opacity 0.3s ease-out';
            el.style.opacity = '0';
            setTimeout(function() { el.remove(); }, 300);
          }, 200);
        }
        // ë¡œë”© ì‹œê°„ ë¡œê¹… (ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ìš©)
        var loadTime = Date.now() - loadStartTime;
        console.log('âœ… Flutter loaded in ' + loadTime + 'ms');
      }

      // Flutterê°€ ì²« í”„ë ˆì„ ë Œë”ë§í•˜ë©´ ì œê±°
      window.addEventListener('flutter-first-frame', removeLoader);

      // ì•ˆì „ì¥ì¹˜: 30ì´ˆ í›„ì—ë„ ë¡œë”© ì¤‘ì´ë©´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í‘œì‹œ
      setTimeout(function() {
        var el = document.getElementById('boot-loader');
        if (!el) return;
        var inner = el.querySelector('.inner');
        if (inner && !document.getElementById('refresh-btn')) {
          var btn = document.createElement('button');
          btn.id = 'refresh-btn';
          btn.textContent = 'ìƒˆë¡œê³ ì¹¨';
          btn.style.cssText = 'margin-top:20px;padding:12px 32px;background:#9B7BFF;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;';
          btn.onclick = function() { location.reload(); };
          inner.appendChild(btn);
        }
      }, 30000);
    })();
  </script>

  <script src="flutter_bootstrap.js?v=20260103-2" async></script>
</body>
</html>
